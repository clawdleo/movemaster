<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoveMaster - Stress-Free Moving Checklist</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .gradient-blue { background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); }
        .progress-ring { transition: stroke-dashoffset 0.5s ease; }
        .task-done { text-decoration: line-through; opacity: 0.6; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen">
    <!-- Header -->
    <nav class="gradient-blue text-white py-6">
        <div class="container mx-auto px-4">
            <h1 class="text-2xl font-bold">üì¶ MoveMaster</h1>
            <p class="text-blue-100 text-sm">Your stress-free moving companion</p>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
        <!-- Setup Section (shown first) -->
        <div id="setupSection">
            <div class="max-w-xl mx-auto">
                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">When's the big move?</h2>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-600 mb-2">Moving Date</label>
                        <input type="date" id="movingDate" class="w-full px-4 py-3 border border-gray-200 rounded-xl text-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-600 mb-2">Moving From</label>
                        <input type="text" id="fromAddress" placeholder="Current address" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div class="mb-8">
                        <label class="block text-sm font-medium text-gray-600 mb-2">Moving To</label>
                        <input type="text" id="toAddress" placeholder="New address" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <button onclick="startPlanning()" class="w-full gradient-blue text-white py-4 rounded-xl font-semibold text-lg hover:opacity-90 transition">
                        üöÄ Start Planning
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Dashboard (shown after setup) -->
        <div id="dashboardSection" style="display: none;">
            <!-- Progress Overview -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Moving to <span id="displayTo" class="text-blue-600"></span></h2>
                        <p class="text-gray-500 mt-1">
                            <span id="daysLeft" class="font-semibold text-blue-600"></span> days until moving day
                        </p>
                    </div>
                    <div class="flex items-center gap-6">
                        <div class="text-center">
                            <div class="text-4xl font-bold text-blue-600" id="progressPercent">0%</div>
                            <div class="text-sm text-gray-500">Complete</div>
                        </div>
                        <div class="relative w-20 h-20">
                            <svg class="w-20 h-20 transform -rotate-90">
                                <circle cx="40" cy="40" r="36" stroke="#e2e8f0" stroke-width="8" fill="none"/>
                                <circle cx="40" cy="40" r="36" stroke="#3b82f6" stroke-width="8" fill="none"
                                    stroke-dasharray="226" stroke-dashoffset="226" class="progress-ring" id="progressRing"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timeline View -->
            <div class="grid lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-amber-50 rounded-2xl p-6 border-2 border-amber-200">
                    <h3 class="font-bold text-amber-800 mb-1">üìÖ 8+ Weeks Before</h3>
                    <p class="text-sm text-amber-600 mb-4">Early planning</p>
                    <div class="text-2xl font-bold text-amber-700" id="phase1Progress">0/0</div>
                </div>
                <div class="bg-blue-50 rounded-2xl p-6 border-2 border-blue-200">
                    <h3 class="font-bold text-blue-800 mb-1">üìã 4-8 Weeks Before</h3>
                    <p class="text-sm text-blue-600 mb-4">Preparation</p>
                    <div class="text-2xl font-bold text-blue-700" id="phase2Progress">0/0</div>
                </div>
                <div class="bg-purple-50 rounded-2xl p-6 border-2 border-purple-200">
                    <h3 class="font-bold text-purple-800 mb-1">üì¶ 1-4 Weeks Before</h3>
                    <p class="text-sm text-purple-600 mb-4">Packing time</p>
                    <div class="text-2xl font-bold text-purple-700" id="phase3Progress">0/0</div>
                </div>
                <div class="bg-green-50 rounded-2xl p-6 border-2 border-green-200">
                    <h3 class="font-bold text-green-800 mb-1">üè† Moving Week</h3>
                    <p class="text-sm text-green-600 mb-4">Final stretch</p>
                    <div class="text-2xl font-bold text-green-700" id="phase4Progress">0/0</div>
                </div>
            </div>

            <!-- Task Lists -->
            <div class="space-y-6" id="taskLists"></div>

            <!-- Add Custom Task -->
            <div class="mt-8 bg-white rounded-2xl shadow-lg p-6">
                <h3 class="font-bold text-gray-800 mb-4">‚ûï Add Custom Task</h3>
                <div class="flex gap-4">
                    <input type="text" id="customTask" placeholder="Enter custom task..." class="flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500">
                    <select id="customPhase" class="px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500">
                        <option value="phase1">8+ Weeks Before</option>
                        <option value="phase2">4-8 Weeks Before</option>
                        <option value="phase3">1-4 Weeks Before</option>
                        <option value="phase4">Moving Week</option>
                    </select>
                    <button onclick="addCustomTask()" class="gradient-blue text-white px-6 py-3 rounded-xl font-medium hover:opacity-90 transition">Add</button>
                </div>
            </div>

            <!-- Reset Button -->
            <div class="mt-8 text-center">
                <button onclick="resetAll()" class="text-gray-400 hover:text-red-500 text-sm">Reset all progress</button>
            </div>
        </div>
    </div>

    <script>
        const defaultTasks = {
            phase1: [
                { id: 1, text: "Research and book moving company (get 3+ quotes)", done: false },
                { id: 2, text: "Create moving budget", done: false },
                { id: 3, text: "Start decluttering - room by room", done: false },
                { id: 4, text: "Sell/donate items you won't take", done: false },
                { id: 5, text: "Gather important documents (passport, contracts, etc.)", done: false },
                { id: 6, text: "If renting: give notice to landlord", done: false },
                { id: 7, text: "Research new area (schools, doctors, services)", done: false },
                { id: 8, text: "Start collecting free boxes (stores, online)", done: false }
            ],
            phase2: [
                { id: 9, text: "Confirm moving company booking", done: false },
                { id: 10, text: "Change address with post office", done: false },
                { id: 11, text: "Notify bank of address change", done: false },
                { id: 12, text: "Update address: employer, insurance, subscriptions", done: false },
                { id: 13, text: "Transfer/cancel utilities at old address", done: false },
                { id: 14, text: "Set up utilities at new address", done: false },
                { id: 15, text: "Transfer/update internet service", done: false },
                { id: 16, text: "Start packing rarely-used items", done: false },
                { id: 17, text: "Buy packing supplies (tape, markers, bubble wrap)", done: false },
                { id: 18, text: "Arrange pet/child care for moving day", done: false }
            ],
            phase3: [
                { id: 19, text: "Pack room by room, label everything", done: false },
                { id: 20, text: "Pack 'essentials' box (toiletries, phone charger, snacks)", done: false },
                { id: 21, text: "Take photos of electronics setup before unplugging", done: false },
                { id: 22, text: "Empty and defrost freezer", done: false },
                { id: 23, text: "Return borrowed items, collect lent items", done: false },
                { id: 24, text: "Confirm moving day details", done: false },
                { id: 25, text: "Arrange parking for moving truck", done: false },
                { id: 26, text: "Say goodbye to neighbors", done: false },
                { id: 27, text: "Get change of address cards", done: false },
                { id: 28, text: "Update driver's license address", done: false }
            ],
            phase4: [
                { id: 29, text: "Final walkthrough of old place", done: false },
                { id: 30, text: "Take meter readings (gas, electric, water)", done: false },
                { id: 31, text: "Clean old place", done: false },
                { id: 32, text: "Hand over keys", done: false },
                { id: 33, text: "Check new place before unloading", done: false },
                { id: 34, text: "Supervise unloading, check for damage", done: false },
                { id: 35, text: "Set up beds first!", done: false },
                { id: 36, text: "Locate essentials box", done: false },
                { id: 37, text: "Check all utilities work", done: false },
                { id: 38, text: "Change locks if needed", done: false },
                { id: 39, text: "Meet new neighbors", done: false },
                { id: 40, text: "Register at new doctor/dentist", done: false }
            ]
        };

        let moveData = null;

        function loadData() {
            const saved = localStorage.getItem('movemaster_data');
            if (saved) {
                moveData = JSON.parse(saved);
                return true;
            }
            return false;
        }

        function saveData() {
            localStorage.setItem('movemaster_data', JSON.stringify(moveData));
        }

        function startPlanning() {
            const movingDate = document.getElementById('movingDate').value;
            const fromAddress = document.getElementById('fromAddress').value;
            const toAddress = document.getElementById('toAddress').value;

            if (!movingDate) {
                alert('Please enter your moving date');
                return;
            }

            moveData = {
                movingDate,
                fromAddress,
                toAddress,
                tasks: JSON.parse(JSON.stringify(defaultTasks)),
                customTasks: { phase1: [], phase2: [], phase3: [], phase4: [] }
            };
            saveData();
            showDashboard();
        }

        function showDashboard() {
            document.getElementById('setupSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'block';
            renderDashboard();
        }

        function renderDashboard() {
            // Calculate days left
            const moveDate = new Date(moveData.movingDate);
            const today = new Date();
            const daysLeft = Math.ceil((moveDate - today) / (1000 * 60 * 60 * 24));
            
            document.getElementById('displayTo').textContent = moveData.toAddress || 'your new home';
            document.getElementById('daysLeft').textContent = daysLeft > 0 ? daysLeft : 0;

            // Render task lists
            const taskLists = document.getElementById('taskLists');
            taskLists.innerHTML = '';

            const phases = [
                { key: 'phase1', title: 'üìÖ 8+ Weeks Before', color: 'amber' },
                { key: 'phase2', title: 'üìã 4-8 Weeks Before', color: 'blue' },
                { key: 'phase3', title: 'üì¶ 1-4 Weeks Before', color: 'purple' },
                { key: 'phase4', title: 'üè† Moving Week', color: 'green' }
            ];

            let totalTasks = 0;
            let completedTasks = 0;

            phases.forEach(phase => {
                const allTasks = [...moveData.tasks[phase.key], ...(moveData.customTasks[phase.key] || [])];
                const done = allTasks.filter(t => t.done).length;
                totalTasks += allTasks.length;
                completedTasks += done;

                document.getElementById(`${phase.key}Progress`).textContent = `${done}/${allTasks.length}`;

                const section = document.createElement('div');
                section.className = `bg-white rounded-2xl shadow-lg overflow-hidden`;
                section.innerHTML = `
                    <div class="bg-${phase.color}-50 px-6 py-4 border-b border-${phase.color}-100 cursor-pointer" onclick="toggleSection('${phase.key}')">
                        <div class="flex justify-between items-center">
                            <h3 class="font-bold text-${phase.color}-800">${phase.title}</h3>
                            <div class="flex items-center gap-3">
                                <span class="text-sm text-${phase.color}-600">${done}/${allTasks.length} done</span>
                                <span class="transform transition" id="${phase.key}Arrow">‚ñº</span>
                            </div>
                        </div>
                    </div>
                    <div id="${phase.key}Tasks" class="p-4 space-y-2">
                        ${allTasks.map(task => `
                            <div class="flex items-center gap-3 p-3 rounded-xl hover:bg-gray-50 ${task.done ? 'task-done' : ''}">
                                <input type="checkbox" ${task.done ? 'checked' : ''} 
                                    onchange="toggleTask('${phase.key}', ${task.id})"
                                    class="w-5 h-5 rounded border-gray-300 text-${phase.color}-600 focus:ring-${phase.color}-500">
                                <span class="flex-1 text-gray-700">${task.text}</span>
                                ${task.custom ? `<button onclick="deleteTask('${phase.key}', ${task.id})" class="text-gray-400 hover:text-red-500 text-sm">‚úï</button>` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
                taskLists.appendChild(section);
            });

            // Update overall progress
            const percent = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            document.getElementById('progressPercent').textContent = `${percent}%`;
            const ring = document.getElementById('progressRing');
            ring.style.strokeDashoffset = 226 - (226 * percent / 100);
        }

        function toggleSection(phase) {
            const section = document.getElementById(`${phase}Tasks`);
            const arrow = document.getElementById(`${phase}Arrow`);
            if (section.style.display === 'none') {
                section.style.display = 'block';
                arrow.style.transform = 'rotate(0deg)';
            } else {
                section.style.display = 'none';
                arrow.style.transform = 'rotate(-90deg)';
            }
        }

        function toggleTask(phase, taskId) {
            // Check in default tasks
            const task = moveData.tasks[phase].find(t => t.id === taskId);
            if (task) {
                task.done = !task.done;
            } else {
                // Check in custom tasks
                const customTask = moveData.customTasks[phase]?.find(t => t.id === taskId);
                if (customTask) {
                    customTask.done = !customTask.done;
                }
            }
            saveData();
            renderDashboard();
        }

        function addCustomTask() {
            const text = document.getElementById('customTask').value.trim();
            const phase = document.getElementById('customPhase').value;
            
            if (!text) return;
            
            if (!moveData.customTasks[phase]) {
                moveData.customTasks[phase] = [];
            }
            
            moveData.customTasks[phase].push({
                id: Date.now(),
                text,
                done: false,
                custom: true
            });
            
            document.getElementById('customTask').value = '';
            saveData();
            renderDashboard();
        }

        function deleteTask(phase, taskId) {
            moveData.customTasks[phase] = moveData.customTasks[phase].filter(t => t.id !== taskId);
            saveData();
            renderDashboard();
        }

        function resetAll() {
            if (confirm('This will reset all your progress. Are you sure?')) {
                localStorage.removeItem('movemaster_data');
                location.reload();
            }
        }

        // Initialize
        if (loadData()) {
            showDashboard();
        } else {
            // Set default date to 8 weeks from now
            const date = new Date();
            date.setDate(date.getDate() + 56);
            document.getElementById('movingDate').value = date.toISOString().split('T')[0];
        }
    </script>
</body>
</html>
